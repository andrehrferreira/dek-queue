{"version":3,"sources":["../src/index.js"],"names":["Queue","name","timeout","timer","queue","data","push","cb","setInterval","length","shift","Queues","queues","$","set"],"mappings":";;;;;;;;;;AAAA;;;;IAEMA,K;AACF,mBAAYC,IAAZ,EAAkB;AAAA;;AACd,aAAKA,IAAL,GAAYA,IAAZ;AACA,aAAKC,OAAL,GAAe,IAAf;AACA,aAAKC,KAAL,GAAa,IAAb;AACA,aAAKC,KAAL,GAAa,EAAb;AACH;;;;6BAEIC,I,EAAK;AACN,iBAAKD,KAAL,CAAWE,IAAX,CAAgBD,IAAhB;AACH;;;mCAEUF,K,EAAM;AACb,gBAAG,OAAOA,KAAP,IAAgB,QAAnB,EACI,KAAKD,OAAL,GAAeC,KAAf;AACP;;;kCAESI,E,EAAG;AAAA;;AACT,iBAAKJ,KAAL,GAAaK,YAAY,YAAM;AAC3B,oBAAG,MAAKJ,KAAL,CAAWK,MAAX,GAAoB,CAAvB,EAAyB;AACrB,wBAAIJ,OAAO,MAAKD,KAAL,CAAW,CAAX,CAAX;AACA,0BAAKA,KAAL,CAAWM,KAAX;AACAH,uBAAGF,IAAH,EAAS,MAAKD,KAAL,CAAWK,MAApB;AACH;AACJ,aANY,EAMV,KAAKP,OANK,CAAb;AAOH;;;;;;IAGCS,M;AACF,sBAAc;AAAA;;AACV,aAAKC,MAAL,GAAc,EAAd;AACH;;;;kCAESX,I,EAAK;AACX,gBAAG,QAAO,KAAKW,MAAL,CAAYX,IAAZ,CAAP,MAA6B,QAAhC,EACI,KAAKW,MAAL,CAAYX,IAAZ,IAAoB,IAAID,KAAJ,CAAUC,IAAV,CAApB;;AAEJ,mBAAO,KAAKW,MAAL,CAAYX,IAAZ,CAAP;AACH;;;;;;kBAGU,YAAM;AACjBY,aAAEC,GAAF,CAAM,OAAN,EAAe,IAAIH,MAAJ,EAAf;AACH,C","file":"index.js","sourcesContent":["import { $ } from \"@dekproject/scope\";\n\nclass Queue {\n    constructor(name) {\n        this.name = name;\n        this.timeout = 1000;\n        this.timer = null;\n        this.queue = [];\n    }\n\n    push(data){\n        this.queue.push(data);\n    }\n\n    setTimeout(timer){\n        if(typeof timer == \"number\")\n            this.timeout = timer;\n    }\n\n    setParser(cb){\n        this.timer = setInterval(() => {\n            if(this.queue.length > 0){\n                let data = this.queue[0];\n                this.queue.shift();\n                cb(data, this.queue.length);\n            }\n        }, this.timeout);\n    }\n}\n\nclass Queues{\n    constructor() {\n        this.queues = {};\n    }\n\n    subscribe(name){\n        if(typeof this.queues[name] !== \"object\")\n            this.queues[name] = new Queue(name);\n\n        return this.queues[name];\n    }\n}\n\nexport default () => {\n    $.set(\"queue\", new Queues());\n}\n"]}